
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width,initial-scale=1.0">
        <title>疫情可视化</title>

    </head>
    <body>
        <div id="main" style="width: 600px;height:400px;border: 1px solid red;margin: 100px auto;"></div>
        <script src="./js/echarts.min.js"></script>
        <script src="./js/map/china.js"></script>
        <script type="text/javascript">
            let container = document.getElementById('main')
            var myChart = echarts.init(container);
              
            fetch('./data.json')  
            .then(res => res.json())  
            .then((res) => {
                let data = res.map(r =>{
                    return{
                        name:r.provinceShortName,
                        value:[r.currentConfirmedCount,r.confirmedCount,r.suspectedCount,
                        r.curedCount,r.deadCount]
                    }
                })             

            var option = {
                visualMap:{
                    dimension: 0,
                    pieces: [
                        { gte: 10000 },            
                        { gte: 1000, lte: 9999 }, 
                        { gte: 100, lte: 999 },  
                        { gte: 10, lte: 99 },   
                        { gte: 1, lte: 9},
                        { gte: 0, lte: 0}
                    ]
                },
                title:{
                    text:"疫情地图",
                    textStyle:{
                        fontSize:30
                    },
                    subtext:"111",
                    left:"center",
                    padding:15,
                },
                
                tooltip:{
                    formatter({data}){
                        return `
                        中国 ${data.name}<br>
                        当前确诊：${data.value[0]}<br>
                        累计确诊：${data.value[1]}<br>
                        当前疑似：${data.value[2]}<br>
                        累计治愈：${data.value[3]}<br>
                        累计死亡：${data.value[4]}<br>
                        `
                    }
                },
                series:[
                    {
                        name:"疫情地图",
                        type:'map',
                        map:"china",
                        data 
                    }
                ]
            };
    
            // 使用刚指定的配置项和数据显示图表。
            myChart.setOption(option);

        }) 
        </script>
    </body>
</html>